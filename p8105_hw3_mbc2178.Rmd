---
title: "p8105_hw3_mbc2178"
author: "Melvin Coleman"
date: "2022-10-11"
output: github_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  fig.width = 6,
  out.width = "90%",
  fig.height = 6
  )
```

Let's load in the packages needed to perform data import,manipulation and cleaning for this assignment.

```{r message = FALSE}
library(tidyverse)
library(dplyr)
library(readr)
library(p8105.datasets)
```

## Problem 1 

Let's load the `instacart` data from the `p8105.datasets` using the following:
```{r}
data("instacart") 

instacart = 
  instacart %>% 
  as_tibble(instacart)
```

The `instacart` dataset contains `r nrow(instacart)` observation 
and `r ncol(instacart)` variables. The variables that exist in this dataset include 
`r ls(instacart)`. 


## Problem 2 

Let's import the `accel_data` dataset to R. This dataset contains five weeks of 
accelorometer data collected on a 63 year old male with BMI 25, who was admitted 
to the Advanced Cardiac Care Center of Columbia University Medical Center and diagnosed 
with congestive hear failure (CHF).

We will perform some tidying and wrangle the data before proceeding to perform 
any analysis. First, we will consider using `janitor::clean_names()` to clean 
the names of the variables in the dataset. Next, we will use the `pivot_longer`
function to create a new variable that contains the activity count names and 
another variable that contains the activity counts for each munute of a 24-hr 
day starting at midnight. We arranged dataset according to day of week and 
converted day to a factor variable for 

```{r , results=hide}
accel_df =
  read_csv(file = "data/accel_data.csv") %>% 
  janitor::clean_names() %>% 
  pivot_longer(
    activity_1:activity_1440,
    names_to = "activity",
    names_prefix= "activity_",
    values_to = "activity_cnt"
  ) %>% 
  mutate(
    day = factor(day,levels =(c("Monday","Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"))),
    activity = as.numeric(activity),
    
    day_of_week = case_when(
    day == "Monday" ~ "Weekday",
    day == "Tuesday" ~ "Weekday",
    day == "Wednesday" ~ "Weekday",
    day == "Thursday" ~ "Weekday",
    day =="Friday" ~ "Weekend",
    day == "Saturday" ~ "Weekend",
    day == "Sunday" ~ "Weekend",
  )) %>% 
  arrange(day_of_week)
 
```

The `accel_df` consists of `r nrow(accel_df)` observations and `r ncol(accel_df)` variables. 
The variables in this dataset include `r(accel_df)`
The maximum amount of activites that the patient engaged in was `r max(accel_df$activity_cnt)`
Maybe can add mean amount of mins 

Now let's use our tidied dataset to understand the total activity over the day. We will aggregate 
across minutes to create a total activity variable for each and create a table showing these totals. 
We generated a table below in descending order of total minutes for each day.

```{r}
accel_df %>% 
  group_by(day, week) %>% 
  summarize(total_acitvity_cnt = sum(activity_cnt)) %>% 
  pivot_wider(
    names_from = day,
    values_from = total_acitvity_cnt
  ) %>% 
  knitr::kable(digits = 1)
```


Now, let's create a single panel plot that shows the 24 hour activity courses for each day 
and use color to indicate the day of the week. 

```{r}
accel_df %>% 
  ggplot(aes(x=activity, y =activity_cnt, color = day)) +
  geom_line(alpha = .3) 
  
```

Provide description of what's going on here NEED TO FIGURE OUT SORTING ORDER on graph!!!

##Problem 3 


Let's load the `ny_noaa` dataset to answer problem 3 using the code below.

```{r}
data("ny_noaa") 
```
Wtite short description describing dataset, size and structure, variables missing data


Now we perform some data cleaning 
ensure that observations for temperature, precipitation, and snowfall are given in reasonable units
Let's perform some data cleaning on this dataset. We first separate the variable
`date` into three separate variables, `year`, `month`, and `day`. Convert 

precipitation converted to cm (0.1mm = 0.01cm) divide by 10
snowfall converted to cm (1mm = 0.1cm) multiply by 10
temperature converted to C (0.1 C = 1C) multiply by 10
tmax same conversions too

```{r}
noaa_df = 
  ny_noaa %>% 
  as_tibble(ny_noaa)%>% 
  janitor::clean_names() %>% 
  separate(date, into = c("year", "month", "day")) %>% 
  mutate(
    prcp = as.numeric(prcp* 10),
    snow = as.numeric(snow* 10),
    tmax = as.numeric(tmax*10),
    tmin = as.numeric(tmin*10))
    
```

Maybe use lubridate!!!!!











